<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Sucursales</title>
<th:block th:include="fragments/stylesheader :: head"></th:block>
</head>
<body>
	<!-- Incluyo el fragmento header donde se encuentra el nav(menu) -->
    <th:block th:include="fragments/headerCompania :: headerCompania"></th:block>
 	<section class="welcome_area clearfix" id="home" style="background-image: url(img/bg-img/welcome-bg.png)">
	<br/><br/><br/><br/>
	
	<div class="container" style="padding-top: 30px">
		<div class="page-header">
		<div class="container" style="padding-top: 30px">
	        <h1>Mis Sucursales</h1>
	        </div>
                </div>
                <a href="#" th:href="@{/companiaSucursalesNuevo}">Crear Sucursal</a>                 
                  <table border="0" class="table table-hover">
				<tr>
					<th>Nombre</th>
					<th>Direccion</th>
					<th>Descripcion</th>
                    <th>Ciudad</th>     
                    <th>Visualizar</th>
					<th>Modificar</th>
					<th>Eliminar</th>                               
				</tr>
				<tr th:each="ls : ${listaSucursales}">
					<td th:text="${ls.nombre}"/>
					<td th:text="${ls.direccion}"/>
					<td th:text="${ls.descripcion}"/>
					<td th:text="${ls.ciudad.nombre}"/>
					<td><a th:href="${'/compania/sucursales/'+ls.idlistaSucursal}">Ver</a></td>
					<td><a th:href="${'/companiaSucursalesEdit/'+ls.idlistaSucursal}">Editar</a></td>
					<td><a href="#" class="linkDelete" th:id="${ls.idlistaSucursal}">Borrar</a></td>
				</tr>      
                    </table> 
                </div>
                
         <!-- Division Modal -->
	<div id="modalDelete" class="modal fade" tabindex="-1" role="dialog">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title">Borrar Empleado Asociado</h4>
				</div>
				<div class="modal-body">
					<p>Seguro de eliminar esta registro??</p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
					<button id="btnDelete" class="btn btn-danger">
						<span class="glyphicon glyphicon-trash"></span>Borrar</button>
				</div>
			</div>
		</div>
	</div>


	<!-- Funcion JavaScript que recupera el valor del id y lo envia a la URL: /../delete/ del controller-->
	<script type="text/javascript">
		$(function() {
			var idEntidad = null;

			$('.linkDelete').on('click', function(e) {
				e.preventDefault();
				$('#modalDelete').modal();
				idEntidad = $(this).attr('id');
			});

			$('#btnDelete').on('click', function() {
				location.href = "/sucursalEliminar/" + idEntidad;
			});
		});
	</script>
                </section>
        <br/>
	<br/>
	<th:block th:include="fragments/down :: down"></th:block> 
</body>
</html>